<?xml version="1.0" encoding="utf-8"?>
<!--
  MORNING FOCUS ALARM — AndroidManifest.xml snippets
  Merge these into: android/app/src/main/AndroidManifest.xml
  (Generated by Capacitor: npx cap add android)
-->

<!-- ========== 1. PERMISSIONS (add inside <manifest>) ========== -->

<!-- Exact alarm: required for alarm-clock apps so the alarm fires at the set time (Android 13+). -->
<uses-permission android:name="android.permission.USE_EXACT_ALARM" />

<!-- Exact alarm fallback for API 31–32 (use only one of USE_EXACT_ALARM or SCHEDULE_EXACT_ALARM on API 33+). -->
<uses-permission android:name="android.permission.SCHEDULE_EXACT_ALARM" android:maxSdkVersion="32" />

<!-- Full-screen intent: show alarm UI over lock screen when notification fires. -->
<uses-permission android:name="android.permission.USE_FULL_SCREEN_INTENT" />

<!-- Wake lock: keep device awake while alarm is ringing / protocol is shown. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />

<!-- Vibrate: alarm can vibrate. -->
<uses-permission android:name="android.permission.VIBRATE" />

<!-- Notifications: required for scheduling and showing the alarm notification (Android 13+). -->
<uses-permission android:name="android.permission.POST_NOTIFICATIONS" />

<!-- Reschedule alarms after device reboot. -->
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<!-- Optional: if you use a foreground service for more reliable alarm delivery under Doze. -->
<!-- <uses-permission android:name="android.permission.FOREGROUND_SERVICE" /> -->
<!-- <uses-permission android:name="android.permission.FOREGROUND_SERVICE_SPECIAL_USE" /> -->


<!-- ========== 2. APPLICATION ATTRIBUTES (merge into <application>) ========== -->

<!-- Allow full-screen intent (alarm overlay) when app is not in foreground. -->
<application
  android:showWhenLocked="true"
  android:turnScreenOn="true"
  ... existing attributes ...>


<!-- ========== 3. RECEIVER FOR BOOT (add inside <application>) ========== -->
<!-- Reschedule alarm when device boots. Call your scheduling logic from here or from the Capacitor plugin. -->

<!--
<receiver
  android:name=".AlarmBootReceiver"
  android:enabled="true"
  android:exported="true">
  <intent-filter>
    <action android:name="android.intent.action.BOOT_COMPLETED" />
    <action android:name="android.intent.action.QUICKBOOT_POWERON" />
  </intent-filter>
</receiver>
-->


<!-- ========== 4. LOCAL NOTIFICATIONS CHANNEL (handled in JS) ========== -->
<!-- Channel (importance, visibility, sound) is created in code via @capacitor/local-notifications.
     Use importance 5 (max) and visibility 1 (public) so the alarm can wake the device and show on lock screen.
     See: src/lib/notifications.ts -->


<!-- ========== QUICK REFERENCE: PERMISSION LIST ========== -->
<!--
  USE_EXACT_ALARM
  SCHEDULE_EXACT_ALARM (maxSdkVersion="32")
  USE_FULL_SCREEN_INTENT
  WAKE_LOCK
  VIBRATE
  POST_NOTIFICATIONS
  RECEIVE_BOOT_COMPLETED
-->
